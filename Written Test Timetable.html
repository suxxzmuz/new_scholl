<!-- ì§€í•„í‰ê°€ ì‹œê°„í‘œ -->

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Written Test Timetable</title>
  <style> 
    h1 {
      color: #333;
      margin-top: 30px;
      text-align: center;
    }
    table {
      border-collapse: collapse;
      margin-top: 20px;
    }
    table, td, th {
      border: 2px solid black;
      text-align: center;
    }
    td {
      width: 120px;
      height: 50px;
    }
    th {
      background-color: #f7cac9;
    }
    input[type="date"],
    input[type="text"] {
      width: 99%;
      padding: 5px;
      font-size: 15px;
      text-align: center;
      border: none;
      font-size: 16px;
      background-color: #f9f9f9;
    }
    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #ffffff;
      border: 2px solid #000000;
      border-radius: 10px;
      cursor: pointer;
    }
    .buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    table.exam-table {
      width: 100%;
      table-layout: fixed;      /* ê° ì—´ì„ ê· ë“±í•˜ê²Œ ë¶„í•  */
      border-collapse: collapse;
    }

    table.exam-table th,
    table.exam-table td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
      word-wrap: break-word;
    }
    @media screen and (max-width: 600px) {
      table.exam-table td, table.exam-table th {
        font-size: 12px;
        padding: 5px;
      }
    }


  </style>
</head>
<body>
  <h1>ğŸ“ ì§€í•„í‰ê°€ ì‹œê°„í‘œ</h1>

  <div id="examContainer"></div>

  <div class="buttons">
    <button onclick="addDateBlock()">â• ë‚ ì§œ ì¶”ê°€</button>
    <button onclick="saveExam()">ğŸ’¾ ì €ì¥</button>
    <button onclick="clearExam()">ğŸ”„ ì´ˆê¸°í™”</button>
    <button onclick="goHome()">ğŸ  ë©”ì¸ í™”ë©´ìœ¼ë¡œ</button>
  </div>

  <!-- ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸° ê¸°ëŠ¥ -->

  <script>
    function saveExam() {
      const rows = document.querySelectorAll("#examTable tbody tr");
      const data = Array.from(rows).map(row =>
        Array.from(row.querySelectorAll("input")).map(input => input.value)
      );
      localStorage.setItem("examSchedule", JSON.stringify(data));
      alert("ì§€í•„í‰ê°€ ì‹œê°„í‘œê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }

    function clearExam() {
      document.querySelectorAll("#examTable input").forEach(input => input.value = "");
      localStorage.removeItem("examSchedule");
    }

    window.onload = function () {
      const saved = localStorage.getItem("examSchedule");
      if (saved) {
        const data = JSON.parse(saved);
        const rows = document.querySelectorAll("#examTable tbody tr");
        data.forEach((values, i) => {
          const inputs = rows[i].querySelectorAll("input");
          values.forEach((val, j) => {
            if (inputs[j]) inputs[j].value = val;
          });
        });
      }
    };
  </script>
  <script>
    function goHome() {
      window.location.href = 'Main.html';
    }
  </script>

<!-- ê³¼ëª© list -->
  <datalist id="exam-subject">
    <option value="ë…ì„œ">
    <option value="ë¬¸í•™">
    <option value="ìˆ˜í•™I">
    <option value="ìˆ˜í•™II">
    <option value="ì˜ì–´I">
    <option value="ì˜ì–´II">
    <option value="í•œêµ­ì‚¬">
    <option value="ì²´ìœ¡">
    <option value="í™•ë¥ ê³¼ í†µê³„"> 
    <option value="ê¸°í•˜">
    <option value="ìƒí™œê³¼ ìœ¤ë¦¬">
    <option value="ì •ì¹˜ì™€ ë²•">
    <option value="í•œêµ­ì§€ë¦¬">
    <option value="ê³ ì „ê³¼ ìœ¤ë¦¬">
    <option value="ì—¬í–‰ì§€ë¦¬">
    <option value="ë¬¼ë¦¬í•™I">
    <option value="í™”í•™I">
    <option value="ìƒëª…ê³¼í•™I">
    <option value="ì§€êµ¬ê³¼í•™I">
    <option value="ìƒíƒœì™€ í™˜ê²½">
    <option value="ì •ë³´">
    <option value="ê°€ì •ê³¼í•™">
    <option value="ì¼ë³¸ì–´I"> 
  </datalist>

 <script>
    let blockCount = 0;

    function createExamBlock(dateValue = "", rows = 3, subjects = []) {
      const blockId = `exam-block-${blockCount++}`;
      const container = document.getElementById("examContainer");

      const block = document.createElement("div");
      block.className = "exam-block";
      block.id = blockId;

block.innerHTML = `
  <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
    <label for="exam-date-${blockId}" style="font-weight: bold;">ğŸ“… ë‚ ì§œ:</label>
    <input type="date" class="exam-date" id="exam-date-${blockId}" value="${dateValue}" style="flex: 1; padding: 4px 8px; font-size: 15px; box-sizing: border-box;">
  </div>
  <table style="width: 100%; table-layout: fixed;">
    <colgroup>
      <col style="width: 30%;">
      <col style="width: 70%;">
    </colgroup>
    <thead>
      <tr>
        <th>ê³¼ëª©</th>
        <th>ì‹œí—˜ ë²”ìœ„</th>
      </tr>
    </thead>
    <tbody>
      ${Array.from({ length: rows }, (_, i) => `
        <tr>
          <td>
            <input type="text" list="exam-subject" value="${subjects[i]?.subject || ""}" placeholder="ê³¼ëª© ì„ íƒ" style="width: 95%; text-align: center;">
          </td>
          <td>
            <input type="text" value="${subjects[i]?.range || ""}" placeholder="ì‹œí—˜ ë²”ìœ„ ì…ë ¥" style="width: 97%;">
          </td>
        </tr>
      `).join("")}
    </tbody>
  </table>
  <button onclick="addExamRow('${blockId}')">â• ì‹œí—˜ ì¶”ê°€</button>
`;

      container.appendChild(block);
    }

    function addExamRow(blockId) {
      const tbody = document.querySelector(`#${blockId} table tbody`);
      const newRow = document.createElement("tr");
      newRow.innerHTML = `
        <td><input type="text" list="exam-subject" placeholder="ê³¼ëª© ì„ íƒ" style="width: 95%; text-align: center;"></td>
        <td><input type="text" placeholder="ì‹œí—˜ ë²”ìœ„ ì…ë ¥"></td>
      `;
      tbody.appendChild(newRow);
    }

    function addDateBlock() {
      createExamBlock();
    }

    function saveExam() {
      const blocks = document.querySelectorAll(".exam-block");
      const data = Array.from(blocks).map(block => {
        const date = block.querySelector(".exam-date").value;
        const rows = block.querySelectorAll("tbody tr");
        const subjects = Array.from(rows).map(row => {
          const inputs = row.querySelectorAll("input");
          return {
            subject: inputs[0].value,
            range: inputs[1].value
          };
        });
        return { date, subjects };
      });

      localStorage.setItem("examData", JSON.stringify(data));
      alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }

    function clearExam() {
      if (confirm("ì •ë§ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        document.getElementById("examContainer").innerHTML = "";
        localStorage.removeItem("examData");
        // ê¸°ë³¸ 3ê°œ ë‹¤ì‹œ ìƒì„±
        for (let i = 0; i < 3; i++) createExamBlock();
      }
    }

    // ë¶ˆëŸ¬ì˜¤ê¸°
    window.onload = function () {
      const saved = localStorage.getItem("examData");
      if (saved) {
        const data = JSON.parse(saved);
        data.forEach(entry => {
          createExamBlock(entry.date, entry.subjects.length, entry.subjects);
        });
      } else {
        // ì²˜ìŒ ë¡œë“œ ì‹œ 3ê°œ ìƒì„±
        for (let i = 0; i < 3; i++) createExamBlock();
      }
    };
  </script>
</body>
</html>