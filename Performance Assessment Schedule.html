<!-- ìˆ˜í–‰í‰ê°€ ì¼ì •í‘œ -->
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Performance Assessment Schedule</title>
  <style>
    
     * {
      box-sizing: border-box;
    }
    
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background-color: #ffffff;
      color: #333;
      text-align: center;
    }

    .card-box {
      background: linear-gradient(135deg, #f0f8ff, #e6f2ff);
      border-radius: 16px;
      padding: 20px;
      margin: 20px 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    }

    #pp {
      position: absolute;
      left: 35%;
      max-width: 600px;
      width: 100%;
    }

    h1 { font-size: 24px; }

    .buttons { margin: 10px 0; }

    #monthYear {
      font-size: 18px;
      font-weight: bold;
      margin: 0 15px;
    }

    table.calendar {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 20px;
    }

    table.calendar th, table.calendar td {
      border: 1px solid #ccc;
      width: 14.28%;
      height: 90px;
      vertical-align: top;
      position: relative;
      padding: 5px;
      font-size: 14px;
    }

    table.calendar th {
      background-color: #d4e9ff;
      height: 40px;
      vertical-align: middle;
      text-align: center;
    }

    .dot {
      width: 20px;
      height: 20px;
      background-color: red;
      border-radius: 50%;
      color: white;
      font-size: 12px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 4px;
      margin-left: auto;
      margin-right: auto;
    }

    .today {
      background-color: #e5e4ec;
      border: 2px solid #0c587e;
      font-weight: bold;
    }

    .entry-card {
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 12px 20px;
      margin: 10px auto;
      max-width: 600px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.05);
      text-align: left;
    }

    .entry-line {
      margin: 5px 0;
      font-size: 15px;
      line-height: 1.4;
    }


    .entry-card span {
      display: inline-block;
    }

    button {
      margin: 10px;
      padding: 10px 20px;
      font-size: 14px;
      background-color: #e0f2ff;
      border: 2px solid #000;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

 button:hover {
      background-color: #cce6ff;
    }
  </style>
</head>
<body>
  <div id = 'pp'></div>
  <div class="section card-box" id="timetable-box"></div>
  <h1>ğŸ“˜ ìˆ˜í–‰í‰ê°€ ì¼ì •í‘œ</h1>

  <div class="buttons">
    <button onclick="prevMonth()">â¬… ì´ì „ ë‹¬</button>
    <span id="monthYear"></span>
    <button onclick="nextMonth()">ë‹¤ìŒ ë‹¬ â¡</button>
  </div>

  <table class="calendar" id="calendar"></table>

  <div id="evaluations"></div>

  <div class="buttons">
    <button onclick="saveData()">ğŸ’¾ ì €ì¥</button>
    <button onclick="clearData()">ğŸ”„ ì´ˆê¸°í™”</button>
    <button onclick="goHome()">ğŸ  ë©”ì¸ í™”ë©´ìœ¼ë¡œ</button>
  </div>

  <script>
    let currentDate = new Date();
    let data = {};

    const subjectToEmoji = (subject) => {
      const map = {
        "ë…ì„œ": "ğŸ“–", "ë¬¸í•™": "âœ’", "ìˆ˜í•™I": "â—", "ìˆ˜í•™II": "âœ–",
        "ì˜ì–´I": "ğŸ‡ºğŸ‡¸", "ì˜ì–´II": "ğŸ—£", "í•œêµ­ì‚¬": "ğŸ¯", "ì²´ìœ¡": "ğŸƒ",
        "í™•ë¥ ê³¼ í†µê³„": "ğŸ“Š", "ê¸°í•˜": "ğŸ“", "ìƒí™œê³¼ ìœ¤ë¦¬": "ğŸ§ ",
        "ì •ì¹˜ì™€ ë²•": "âš–", "í•œêµ­ì§€ë¦¬": "ğŸ—º", "ê³ ì „ê³¼ ìœ¤ë¦¬": "ğŸ“š",
        "ì—¬í–‰ì§€ë¦¬": "âœˆï¸", "ë¬¼ë¦¬í•™I": "ğŸ§²", "í™”í•™I": "âš—", "ìƒëª…ê³¼í•™I": "ğŸ§¬",
        "ì§€êµ¬ê³¼í•™I": "ğŸŒ", "ìƒíƒœì™€ í™˜ê²½": "ğŸŒ¿", "ì •ë³´": "ğŸ’»",
        "ê°€ì •ê³¼í•™": "ğŸ³", "ì¼ë³¸ì–´I": "ğŸ‡¯ğŸ‡µ"
      };
      return map[subject] || "ğŸ“˜";
    };

    function renderCalendar() {
      const calendar = document.getElementById("calendar");
      const monthYear = document.getElementById("monthYear");

      const year = currentDate.getFullYear();
      const month = currentDate.getMonth();

      const today = new Date();
      const firstDay = new Date(year, month, 1).getDay();
      const lastDate = new Date(year, month + 1, 0).getDate();

      monthYear.textContent = `${year}ë…„ ${month + 1}ì›”`;

      let html = '<tr>';
      const weekDays = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];
      weekDays.forEach(d => html += `<th>${d}</th>`);
      html += '</tr><tr>';

      for (let i = 0; i < firstDay; i++) html += '<td></td>';

      for (let day = 1; day <= lastDate; day++) {
        const fullDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const hasEval = data[fullDate];
        const isToday =
          day === today.getDate() &&
          month === today.getMonth() &&
          year === today.getFullYear();

        html += `<td onclick="addEvaluation('${fullDate}')" class="${isToday ? 'today' : ''}">
                  <div>${day}</div>
                  ${hasEval ? `<div class="dot">${data[fullDate].length}</div>` : ''}
                 </td>`;

        if ((firstDay + day) % 7 === 0 && day !== lastDate) html += '</tr><tr>';
      }

      const remainingCells = (firstDay + lastDate) % 7;
      if (remainingCells !== 0) {
        for (let i = remainingCells; i < 7; i++) html += '<td></td>';
      }

      html += '</tr>';
      calendar.innerHTML = html;

      renderEvaluations();
    }

    function prevMonth() {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);
      renderCalendar();
    }

    function nextMonth() {
      currentDate = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1);
      renderCalendar();
    }

    function addEvaluation(date) {
      const subject = prompt(`${date} ê³¼ëª© ì…ë ¥:`);
      if (!subject) return;
      const content = prompt(`${date} ë‚´ìš© ì…ë ¥:`);
      if (!content) return;

      if (!data[date]) data[date] = [];
      data[date].push({ subject, content });
      renderCalendar();
    }

    function renderEvaluations() {
      const evalDiv = document.getElementById("evaluations");
      evalDiv.innerHTML = '';
      Object.keys(data).sort().forEach(date => {
        data[date].forEach((item) => {
          const emoji = subjectToEmoji(item.subject);
          evalDiv.innerHTML += `
            <div class="entry-card">
              <div class="entry-line"><strong>ğŸ“… ë‚ ì§œ:</strong> ${date}</div>
              <div class="entry-line"><strong>${emoji} ê³¼ëª©:</strong> ${item.subject}</div>
              <div class="entry-line"><strong>âœ í‰ê°€ ë‚´ìš©:</strong> ${item.content}</div>
            </div>
          `;
        });
      });
    }


    function saveData() {
      localStorage.setItem("evaluationData", JSON.stringify(data));
      alert("ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!");
    }

    function clearData() {
      if (confirm("ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) {
        data = {};
        localStorage.removeItem("evaluationData");
        renderCalendar();
      }
      alert("ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
    }

    function goHome() {
      window.location.href = "index.html";
    }

    window.onload = function () {
      const saved = localStorage.getItem("evaluationData");
      if (saved) data = JSON.parse(saved);
      renderCalendar();
    };
  </script>
</body>
</html>
